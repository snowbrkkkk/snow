-- windui_fps_patch.lua
local function injectFPSLabelMethod(intoObj)
    if typeof(intoObj) ~= "table" then return end
    if intoObj.FPSLabel then return end
    intoObj.FPSLabel = function(self)
        local parent = self.Content or self
        if not parent then
            warn("[WindUI Patch] Não foi possível encontrar container para FPSLabel; usando CoreGui fallback.")
            local sg = Instance.new("ScreenGui")
            sg.Name = "WindUI_FPSLabel_Fallback"
            sg.Parent = game.CoreGui
            parent = sg
        end

        local button = Instance.new("TextButton")
        button.Name = "FPSLabel"
        button.Size = UDim2.new(0, 100, 0, 30)
        button.BackgroundTransparency = 1
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.TextSize = 18
        button.Font = Enum.Font.GothamBold
        button.Text = "FPS: 0"
        button.Parent = parent

        task.spawn(function()
            local RunService = game:GetService("RunService")
            local fps, frames = 0, 0
            RunService.RenderStepped:Connect(function(dt)
                frames += 1
                fps = math.floor(1/dt)
                if frames % 20 == 0 then
                    button.Text = "FPS: " .. fps
                end
            end)
        end)

        return button
    end
end

-- Carregar WindUI
local ok, WindUI = pcall(function()
    return loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()
end)

if not ok or not WindUI then
    warn("[WindUI Patch] Falha ao carregar WindUI original.")
    return
end

injectFPSLabelMethod(WindUI)

getgenv().WindUI = WindUI
return WindUI
